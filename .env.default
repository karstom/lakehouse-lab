# =============================================================================
# .env.default - Default configuration for Lakehouse Lab
# Copy this to .env and customize as needed
# =============================================================================

# Root directory for all data and configurations
# Change this to your preferred location
LAKEHOUSE_ROOT=./lakehouse-data

# =============================================================================
# STANDARD CONFIGURATION (Suitable for laptops, small servers)
# =============================================================================

# Postgres settings
POSTGRES_MEMORY_LIMIT=1G
POSTGRES_MEMORY_RESERVATION=256M
POSTGRES_SHARED_BUFFERS=128MB
POSTGRES_EFFECTIVE_CACHE_SIZE=512MB
POSTGRES_MAINTENANCE_WORK_MEM=64MB
POSTGRES_CHECKPOINT_COMPLETION_TARGET=0.9
POSTGRES_WAL_BUFFERS=16MB
POSTGRES_DEFAULT_STATISTICS_TARGET=100

# MinIO settings
MINIO_MEMORY_LIMIT=2G
MINIO_MEMORY_RESERVATION=512M
MINIO_API_REQUESTS_MAX=1000
MINIO_API_REQUESTS_DEADLINE=10s

# MinIO initialization settings (fixes bucket creation issues)
MINIO_READY_TIMEOUT=20          # readiness check attempts (default: 20 Ã— 3s = 60s total)
MINIO_READY_INTERVAL=3          # seconds between readiness checks
BUCKET_CREATE_RETRIES=8         # bucket creation retry attempts
SKIP_MINIO_READY_CHECK=false    # set to 'true' to skip readiness check (not recommended)

# Iceberg REST settings
ICEBERG_MEMORY_LIMIT=1G
ICEBERG_MEMORY_RESERVATION=256M

# Spark settings
SPARK_MASTER_MEMORY=1g
SPARK_MASTER_CORES=1
SPARK_MASTER_MEMORY_LIMIT=2G
SPARK_MASTER_MEMORY_RESERVATION=512M
SPARK_WORKER_MEMORY=4g
SPARK_WORKER_CORES=2
SPARK_WORKER_MEMORY_LIMIT=8G
SPARK_WORKER_CPU_LIMIT=4
SPARK_WORKER_MEMORY_RESERVATION=2G
SPARK_WORKER_CPU_RESERVATION=1
SPARK_WORKER_INSTANCES=1
SPARK_DAEMON_MEMORY=512m

# Jupyter settings
JUPYTER_MEMORY_LIMIT=4G
JUPYTER_MEMORY_RESERVATION=1G
JUPYTER_SPARK_DRIVER_MEMORY=2g
JUPYTER_SPARK_EXECUTOR_MEMORY=2g
JUPYTER_SPARK_EXECUTOR_CORES=1

# Airflow settings
AIRFLOW_EXECUTOR=LocalExecutor
AIRFLOW_WEBSERVER_WORKERS=1
AIRFLOW_WEBSERVER_MEMORY_LIMIT=2G
AIRFLOW_WEBSERVER_MEMORY_RESERVATION=512M
AIRFLOW_SCHEDULER_MEMORY_LIMIT=2G
AIRFLOW_SCHEDULER_MEMORY_RESERVATION=512M
AIRFLOW_PARALLELISM=16
AIRFLOW_MAX_ACTIVE_RUNS=8
AIRFLOW_MAX_ACTIVE_TASKS=8
AIRFLOW_SCHEDULER_THREADS=2

# Superset settings
SUPERSET_MEMORY_LIMIT=3G
SUPERSET_MEMORY_RESERVATION=1G
SUPERSET_WORKERS=2
SUPERSET_TIMEOUT=60

# Superset settings
SUPERSET_MEMORY_LIMIT=3G
SUPERSET_MEMORY_RESERVATION=1G
SUPERSET_WORKERS=2
SUPERSET_TIMEOUT=60

# Portainer monitoring settings
PORTAINER_MEMORY_LIMIT=512M
PORTAINER_MEMORY_RESERVATION=128M

# Vizro dashboard settings
VIZRO_MEMORY_LIMIT=2G
VIZRO_MEMORY_RESERVATION=512M

# LanceDB vector database settings
LANCEDB_MEMORY_LIMIT=3G
LANCEDB_MEMORY_RESERVATION=1G
